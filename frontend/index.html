<!DOCTYPE html>
<html lang="zxx">
<head>
	<style>
.button {
  background-color: #4CAF50; /* Green */
  border: none;
  color: white;
  padding: 16px 32px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
  margin: 4px 2px;
  -webkit-transition-duration: 0.4s; /* Safari */
  transition-duration: 0.4s;
  cursor: pointer;
}
.button5 {
  background-color: white;
  color: black;
  border: 2px solid #555555;
}

.button5:hover {
  background-color: #555555;
  color: white;
}

.nav-link {
	cursor: pointer;
}

.wrapper {
    text-align: center;


}
	</style>
	<title>ConfHub</title>
	<meta charset="UTF-8">
	<meta name="description" content="Instyle Fashion HTML Template">
	<meta name="keywords" content="instyle, fashion, html">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<!-- Favicon -->
	<link href="img/favicon.ico" rel="shortcut icon"/>

	<!-- Stylesheets -->
	<link rel="stylesheet" href="css/bootstrap.min.css"/>
	<link rel="stylesheet" href="css/font-awesome.min.css"/>
	<link rel="stylesheet" href="css/owl.carousel.min.css"/>

	<!-- Main Stylesheets -->
	<link rel="stylesheet" href="css/style.css"/>
	<!-- <link rel="stylesheet" href="status/signup.css"/> -->
	<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
	<link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Raleway">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<script>
	function openForm() {
  document.getElementById("myForm").style.display = "block";
}

function closeForm() {
  document.getElementById("myForm").style.display = "none";
}
</script>

</head>
<body>
	<!-- Page Preloder -->
	<div id="preloder">
		<div class="loader"></div>
	</div>

	<!-- Header section -->
	<header class="header-section">
		<nav class="navbar navbar-expand-md navbar-dark bg-dark site-navbar">
			<a class="navbar-brand site-logo" href="index.html#">
				<h2><span>Conf</span>Hub</h2>
				<h6 style="color:yellow">My Conference home</h6>
				<p>connecting the</p>
			</a>
			<button class="navbar-toggler d-lg-none" type="button" data-toggle="collapse" data-target="#collapsibleNavId" aria-controls="collapsibleNavId"
				aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			<div class="collapse navbar-collapse" id="collapsibleNavId">
				<!-- Main menu -->
				<ul class="navbar-nav ml-auto mt-2 mt-lg-0">
					<li class="nav-item">
						<a class="nav-link" href="index.html">Home</a>
					</li>
					<li class="nav-item">
						<a class="nav-link" href="about.html">About</a>
					</li> 
					<li class="nav-item">
						<a class="nav-link" href="contact.html">Contact</a>
					</li>
					<li class="nav-item">
						<a id="logInBtn" class="nav-link" data-toggle="modal" data-target="#myModal">Log in</a>
					</li>                                                                    
				</ul>
			</div>
		</nav>
	</header>
	<!-- Header section end-->
	<div class="modal" id="myModal" style="margin-top:15%">
			<div class="modal-dialog">
				<div class="modal-content">
				
					<!-- Modal Header -->
					<div class="modal-header">
						<h4 class="modal-title">ConfHub</h4>
						<button type="button" class="close" data-dismiss="modal">&times;</button>
					</div>
					
					<!-- Modal body -->
					<div class="modal-body">
							<div id="myForm">
									<div class="form-container">
								
										<label for="email"><b>Email</b></label>
										<br>
										<input id="userEmail" type="text" class="form-control" placeholder="Enter Email" name="email" required>
										<br>
										<label for="psw"><b>Password</b></label>
										<br>
										<input id="userPassword" type="password" class="form-control" placeholder="Enter Password" name="psw" required>
										<br>
										<button onclick="logIn()" class="btn btn-success text-centre padding-16">Login</button>
									</div>
								</div>
					</div>
					
					<!-- Modal footer -->
					<!-- <div class="modal-footer">
						<button type="button" class="btn btn-danger" data-dismiss="modal">Close</button>
					</div> -->
					
				</div>
			</div>
		</div>
	

	<!-- Hero section -->
	<section class="hero-section">
		<div class="hero-slider owl-carousel">
			<div class="hs-item set-bg" data-setbg="img/slider/1.jpg" data-hash="slide-1">
				<div class="container">
					<h2>ConfHub</h2>
					<a href="upcoming_events.html" class="site-btn">Upcoming Conferences<i class="fa fa-angle-double-right"></i></a>
				</div>
				<div class="next-hs set-bg" data-setbg="img/slider/2.jpg">
					<a href="#slide-2" class="nest-hs-btn">Next</a>
				</div>
			</div>
			<div class="hs-item set-bg" data-setbg="img/slider/2.jpg" data-hash="slide-2">
				<div class="container">
					<h2>ConfHub</h2>
					<a href="upcoming_events.html" class="site-btn">Upcoming Conferences <i class="fa fa-angle-double-right"></i></a>
				</div>
				<div class="next-hs set-bg" data-setbg="img/slider/1.jpg">
					<a href="#slide-1" class="nest-hs-btn">Next</a>
				</div>
			</div>
		</div>
		<!-- <div class="hero-social-warp">
			<p>Follow us on Social MEdia</p>
			<div class="hero-social-links">
				<a href="#"><i class="fa fa-behance"></i></a>
				<a href="#"><i class="fa fa-dribbble"></i></a>
				<a href="#"><i class="fa fa-twitter"></i></a>
				<a href="#"><i class="fa fa-facebook"></i></a>
				<a href="#"><i class="fa fa-pinterest"></i></a>
			</div>
		</div> -->
	</section>
	<!-- Hero section end-->

	<!-- Blog section -->
	<section class="blog-section spad">
		<div class="wrapper">
				
		<button onclick="location.href='signup.html'"  class="button button5" >Sign up as guest</button>
		<!-- <button class="button button5" style="margin-left: 200px">Sign up as conf organiser</button> -->
			
			
		</div>
	</section>
	<!-- Blog section end-->

	<!-- Back to top -->
	<div class="container">
		<div class="backtotop">
			<div class="up-btn" id="backTotop">UP</div>
		</div>
	</div>
	
	
	<!--====== Javascripts & Jquery ======-->
	<script src="js/jquery-3.2.1.min.js"></script>
	<script src="js/bootstrap.min.js"></script>
	<script src="js/owl.carousel.min.js"></script>
	<script src="js/main.js"></script>

    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>

	<script>
		const SERVER_URL = "http://localhost:5000/";
		const appToken = "51b-b2e3-4bb7-844e-733c6f8970f0cc6f8951-81cf-4fa";

		function logIn() {
			var email = document.getElementById("userEmail").value;
			var password = document.getElementById("userPassword").value;
			axios.post(SERVER_URL + "login", {
				appToken: appToken, email: email, password: password
			})
			.then(response => {
				if (!response.data.success) {
					alert("Failed to log in. Reason: " + response.data.reason);
					return;
				}
				localStorage.setItem("email", email);
				localStorage.setItem("userToken", response.data.token);
				setTimeout(changeToHomePage, 1000);
			});
		}

		function changeToHomePage() {
			window.location.href = "/upcoming_events.html";
		}

		function validateToken() {
			console.log("Running..");
			if (window.location.href.includes("?open=logIn")) {
				window.history.replaceState(null, "", "/index.html");
				var btn = document.getElementById("logInBtn");
				btn.click();
			}
			if (localStorage.getItem("userToken")) {
				console.log("Token: " + localStorage.getItem("userToken"));
				console.log("Email: " + localStorage.getItem("email"));
				axios.post(SERVER_URL + "validate-token", {
					appToken: appToken,
					userToken: localStorage.getItem("userToken"),
					email: localStorage.getItem("email")
				})
				.then(response => {
					console.log(response.data);
					if (!response.data.success) {
						localStorage.setItem("userToken", "");
						localStorage.setItem("email", "");
						console.log("User is not logged in");
						return;
					}
					window.location.href = "/upcoming_events.html";
				});
			}
		}
		window.onload = validateToken;
		
	</script>

	</body>
</html>
